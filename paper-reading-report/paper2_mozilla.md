#题目
    Two Case Studies of Open Source Software Development: Apache and Mozilla
#简介及问题
本文设计了一种方法论研究了apache和Mozilla的开发特点，首先从apache的研究中使用该方法，从其特点中总结出七个假设，然后用同样的方法论研究Mozilla的开发过程，并且验证假设。

提出了开源软件开发模式的优点在于快速、廉价而且有可能做的更好，提出了与传统开发模式相比几个常见的弊端

 - 开发人员规模比较大
 - 工作选择自由度大
 - 没有严格的系统级设计
 - 没有项目规划时间表等
这些问题的出现可能是由于开发人员规模大且很少经常有面对面的交流，主要是通过电子邮件和工作板的形式交流，很多传统的协调工作的方式都没有被采用。但是开源开发的先天性优势决定了他的成功，现在已经是不可忽略的一股力量，下面主要分析apache和mozilla的开发过程。

开源软件的开发模式特点和面临的问题与挑战，具体问题如下：

 - apache的开发是怎样的一个过程
 - 分别有多少人参与了代码编写、问题报告、修复漏洞的工作
 - 人们在参与的过程中是否会变换角色，还是一直担任同一角色？所有人的工作量都是差不多的吗？
 - 代码贡献者在哪一部分工作？是严格的一个文件还是模块水平？
 - apache的缺陷密度是怎样的水平？
 - 解决问题需要的时间是多长？高优先级的问题是否会解决的更快？解决问题的时间间隔会随时间而减少吗？

#方法论及数据源
	备注：该总结中涉及的数据都在论文的表格或者图中，没有给出位置，仅做了一定的总结
    开源软件开发过程很少有面对面交流和电话沟通，所以绝大多数的开发信息被记录在电子档案（邮件等电子资料）中，我们量化的数据来源就是这些

     - apache的记录有邮件（记录了发件人、地址、主题、内容等等必要信息，下同）、BUGDB（bug数据库）、problem reports、CVS上的代码改动细节
     - Mozilla数据源主要来自CVS和Bugzilla
    从这些数据中抽象出一系列的指标来进行评价整个开发过程，其中对于一个problem report我们只考虑三个状态：CREATE、RESOLVED、VERIFIED
    对商业项目提出了两个系统：记录更改历史的扩展的变更管理系统（ECMS）以及追踪源代码变化的源代码控制系统（SCCS）。
    为了方便问题的研究，论文选用了五个与apache同时期的商业项目
#问题的研究与解答
	这一部分逐条解答了简介中提出的各个问题
    
##apache的研究
 - apache的开发是怎样的一个过程
     
         apache的开发开始时是对一个http程序NCSA做修补工作的，几个月之后，已经相当完善的apache逐步去带了之前的服务器，这是apache的第一个版本1.0。因为开始的目标就是修复问题，所以没有任何传统开发的规则，开发人员也是volunteer。交流基本通过email。
         1、角色和职责
            所有的开发者都是志愿，都有一个主业，所以没有很多时间投入开发，整个团队最大的问题是没有严格的决策体系，都是靠投票表决。核心团队的规模一直不大，开始是8人，现在达到15人。每个开发人员都可以提交代码，重大的改动（会影响到其他开发者）通过投票决定。
            核心开发者拥有查看问题并分配任务的权利，同时也担任开发测试职责。
         2、确定工作内容（该修复哪些问题）
            为了确保工作完成度，apache有两个主要的报告途径，一个是开发者mailing list，另一个是BUGDB，如果是BUGDB，报告者可能同时也是开发人员，报告时会自己附上解决的方法，另外一种情况，会将问题报告附加到开发者邮件列表中，如果开发者对该问题的评估觉得它足够严重将由核心人员分配问题解决任务。
         3、工作分配和实施
            确认了问题的严重性之后，核心团队会根据开发者擅长的领域分配任务
            分配任务之后开始着手寻找解决方法，如果已经有几个选择，那么这些选项会跟其他的开发团队讨论
         4、预发布测试
            解决方法一旦确定并且实施后，新的版本会有测试者在自己的服务器上进行测试，类似于单元测试的过程
         5、检查
            单元测试结束后，核心开发者可以直接发布到CVS或者是再通过邮件与其他人员交流。确认之后所有的这些最终检查人员都有权利发布新的版本
         6、管理发布版本
            产品发布之后会有一个核心人员担任产品负责，可以评估产品出现的问题、解决时间直到产品到达一个稳定状态
    
以上对Apache开发做了综述，以下几个问题是结果量化的部分

 - 分别有多少人参与了代码编写、问题报告、修复漏洞的工作
         apache的开发团队非常庞大，平均每一个小的产品有400以上的开发者。
         有182人贡献了695条问题报告，另有249人贡献了6092条代码提交行为
         共有3060人提交了3975个问题，其中458人提交的591个问题得到了apache的最终代码上和文档上的改变
        另外还有2654提交的3384条报告因为不能追踪而没有得到解决。

 - 人们在参与的过程中是否会变换角色，还是一直担任同一角色？所有人的工作量都是差不多的吗？
        从代码库的累计贡献来看，15个人贡献了超过83%的MRs和deltas，以及超过88%的代码增量和91%的代码删减量，核心开发人员正是15个人，这与之前的分析契合。可以看出，核心人员的贡献量占绝大部分。
        如果仅看问题修复的情况，前15人仅贡献了66%的问题修复，修复参与率是26%，代码贡献率是4%，比问题修复要低六倍。
       	以1998年一月份为分割点，之前和之后分别有一次以上fix的开发人员有49人，分别有两次以上的是20人，第一时间段贡献至少一次代码提交的人有140，第二阶段有120人，其中只有25人是两个阶段都有代码提交的。这说明除了核心团队以外，只有少数人对工程产生了改变
        对比其他五个同时期的商业项目（来自电信行业），其中两个前15人所做的delta改变是77%（apache的83%），code改变是68%（apache是88%）.部分的小项目甚至更低，达到了46%的delta和33%的代码改变。如果定义贡献了83%的MRs和88%的代码增加量为top developer的话，apache的top developer值远低于其他的商业项目。
 - 谁在做problem report？
     	BUGDB上共有3975个不同的pr，前15人仅提供了5%的PRs，2600个开发者仅贡献了一个pr，306人贡献了2个，85人提交了3个，同一个问题被最多人报告涉及32人。前15人的开发团队中仅有3人在top 15问题贡献者中。从中我们可以看出，问题的贡献者比代码开发者分布得更加广泛，且分配的更均匀。

 - 代码贡献者在哪一部分工作？是严格的一个文件还是模块水平？
 		我们预期是15个核心人员对代码的贡献量占绝大部分，其他人只贡献少量，不过从结果来看，开发者按需要可能贡献各个模块的代码，也即是说他们之间有充分的信任，代码归属的概念比较模糊

 - apache的缺陷密度是怎样的水平？
 		回答这个问题我们需要先确定量化的标准，现在常用的衡量缺陷密度的标准是每千行代码的出错率，这个指标具有一些先天的缺陷：1、编程语言会造成比较大的影响2、整体的代码计算可能对局部测量产生影响3、没有考虑检测的覆盖面。鉴于这些缺陷，文章采用的量化方法是每千行交付代码的代码增量和delta量，很好地解决了以上的问题。apache与其他的商业项目比较结果如下（仅考虑了造成代码改变的缺陷）：
        apache的最终发布版本缺陷密度比起其他的商业项目要大，但是其系统测试前的缺陷率却很低，说明这一差异是开源项目缺少系统测试导致的，其本身的开发过程能够有更小的缺陷密度
        
 - 解决问题需要的时间是多长？高优先级的问题是否会对解决区间有影响？解决问题的时间间隔会随时间而减少吗？
		50%的问题在一天内解决，75%是42天，90%是140天
        关于优先级，有两种标注优先级方式，一种是报告问题者标注优先级，这样不会对区间的大小造成影响，另外一种是问题涉及的用户数量，这样会有优先级越高解决的区间越小的特点。
        关于时间，以1997年一月为分割点，之后的一段时间比前期解决区间小很多，说明是随着时间减少了的。

##假设
这里提出了七个假设，将在Mozilla的研究中证实
    
   - 假设1：开源软件一般会有一个不大于10-15人的核心开发团队，该团队控制着整个代码库，且贡献了80%的新功能
   - 假设2：如果团队非常庞大，以至于在合理的时间框架内前10-15人不能开发80%的代码，那么就有必要采用严格的代码归属制度将开发团队分组
   - 假设3：成功的开源项目中修复缺陷的团队会比核心团队大一个数量级，报告错误的团队会再大一个数量级
   - 假设4：拥有强大核心团队的项目如果没有超过核心数量的贡献者，那么他们即使能够开发出新的功能也会因为缺少发现问题和修复问题的机构而失败
   - 假设5：如果测试水平相当，开源项目会比只有特性测试的（没有系统测试）一般商业项目缺陷密度要低
   - 假设6：成功的开源软件中，开发者同时也会是软件的使用者
   - 假设7：开源项目对客户反映的问题处理速度很快

##Mozilla的研究
 - Mozilla的开发是怎样的一个过程
公众开始的时候对Mozilla有很高的预期，但是它获得的智齿以及开发人员等等资源都不够，甚至有一名核心人员因为各种条件的缺乏出走。不过在改进之后，Mozilla已经在HP、Oracle、Sun等主流公司获得了广泛的应用，这是它良好的质量和扩展性的体现
         
         1、角色和职责
           目前Mozilla的主要负责人是mozilla.org的12人，其中有4人主要从事浏览器应用的编写，其他人有web应用、bugzilla维护等等各种任务，各个模块的决策权被分配到最接近那一部分代码的人，但是核心人员拥有决策权的取消权和最终决策权。开发者向CVS提交代码改变需要经过模块负责人的准许。
         2、确定工作内容（该修复哪些问题）
            Mozilla.org有一个确定的时间表和下一个开发版本的特性表，同时拥有决策权，但是需要花很长时间确定开发社区同意这些决定
            任何人都可以报告问题或者是提出改进意见，使用的是Bugzilla工具，要求请求者有一个Bugzilla的账户。与apache不同的是，Bugzilla显然更成熟，它能帮助报告者查看最近的bug避免重复报告，并且要求报告者提供必要的细节使bug分辨变得更加简单。同时也便于错误的重现，方便改进。
         3、工作分配和实施
         	比起apache的邮件通知方式，Mozilla的Bugzilla显然更有效率，开发社区可以根据自己的专长寻找他们擅长的更改，如果缺少这样的专业知识，可以在该report上标明需要help，这样核心人员可以参与分配。而且已经分派的任务不会再出现在Bugzilla上面，避免了重复劳动
         4、预发布测试
            Mozilla有一个名为“smoke test”的daily测试，如果build失败，或者是检测到错误，开发人员将会被每天提醒直到，这一部分被修复。
            Mozilla有六个完整的测试团队，分别负责不同的模块，有严谨的测试架构。
         5、检查
            在新的代码进入代码库之前，Mozilla有两个检测模块，一个是该模块拥有者自身的检查，一个是与该模块无关的指定组在其发布之前的最终检查。
         6、管理发布版本
            Mozilla有两个发布后的检测工具，Tinderbox和milestone，前者检测在特定平台下的代码问题，并且会报告代码较之前版本的变化和作者。而milestone会报告更多相关的内容。两个工具报告周琦分别是一天和大概一个月
    
以上对Mozilla开发做了综述，以下几个问题是结果量化的部分（注意Mozilla比apache规模大很多，Mozilla有78个不同的模块，其中有的比Apache整个项目还大）

 - 分别有多少人参与了代码编写、问题报告、修复漏洞的工作
		从CVS上我们看到有486人在贡献代码，有412人对被接受的问题报告的修正有贡献
        而从Bugzilla来看，有6837人报告了58K条错误，有1403人报告了11616条刻意被追踪到代码变化的问题报告，任何一个模块整体参与报告的人数数量级在500-1500之间，最大的一个达到了3000量级
        6873人中只有5%创建的PR是内部的，另外他们报告了58KPR中的47%，这说明Mozilla比起ApachePR报告的分布更不均匀，113人就报告了58K中的30K，他们平均每人报告100条以上。

 - 人们在参与的过程中是否会变换角色，还是一直担任同一角色？所有人的工作量都是差不多的吗？谁在做problem report？
        从代码库的累计贡献来看，Mozilla的整体趋势和Apache差不多，但是由于整体规模比较大，所以核心团队比Apache更大一些。开发社区所占的比例相较Apache没有很大改变。
        Apache的PR报告分布很均匀，但是Mozilla差别则较大，50%的PR报告来自113个人，第一名更是报告了1000条之多，而Apache最高的仅报告了32条。他们之中的46人没有贡献任何代码，而且有25人是外部人员，从中我们可以分析出，Mozilla有一个涵盖了内部和外部人员的专门测试小组。
		由于多数的核心人员都是全职员工，且核心团队规模较大，我们将它与传统的商业项目对比，发现Netscape生产率确实很高，甚至高于某些典型的商业项目。
        而且有一个很重要的特点，有一个核心团队的成员在所有七个主要模块中都有出现，有38个核心成员在两个核心模块中出现，虽然项目的不同会有一定的影响，但是我们显然可以看出，这种混合式的开发模式比传统的商业模式生产力要高。

 - 代码贡献者在哪一部分工作？是严格的一个文件还是模块水平？
 		Apache的代码归属问题比较模糊，没有特定的负责人，但是Mozilla是强制开发者遵循负责人制度的，每一个commit都需要模块负责人的同意才能进行，所以我们考察模块是由哪些人提交的没有意义，它们都是模块负责人提交的

 - Mozilla的缺陷密度是怎样的水平？
 		与Apache一样考虑系统测试前的缺陷密度，我们发现，Mozilla的缺陷密度与Apache是一个数量级，低于普通商业项目数倍。
        
 - 解决问题需要的时间是多长？高优先级的问题是否会对解决区间有影响？解决问题的时间间隔会随时间而减少吗？
		在Bugzilla所有的57966条PR中，99%的都有创建日期和状态更改日期，其中85%已经通过RESOLVED状态，46%状态是FIXED，表明已经被修复到代码库中，83%状态是VERIFIED，表明检查人员同意修复。
		相比较Apache，Mozilla的修复时间要更长一些。
        导致了fix和代码改变的PR有一半在30内解决，而没有导致的有一半在15天内就解决了。
        优先级的影响也很大，P1P3的在30天内被解决，P2在80天内被解决，而P4和P5则需要超过100天。根据上面提到的，优先级造成的影响比较大说明参与者非常遵循Mozilla的优先级规定。这也是Mozilla分模块并统计影响的用户的数量确定优先级的好处。
        
##假设检验

   - 假设1：开源软件一般会有一个不大于10-15人的核心开发团队，该团队控制着整个代码库，且贡献了80%的新功能
   - 假设2：如果团队非常庞大，以至于在合理的时间框架内前10-15人不能开发80%的代码，那么就有必要采用严格的代码归属制度将开发团队分组
		
        	上面两个假设是得到Mozilla研究数据支持的，分析原因可能是当多数人在做非常相同的工作时，少数几个对工作相对了解且被大家信任的人担当分配者可能会获得更高的效率。但是当这个核心的数量超过了15人的时候交流会出现一些问题（Mozilla核心团队是22-26人），因此正如我们假设的那样，Mozilla设定了严格的代码归属制度。
   - 假设3：成功的开源项目中修复缺陷的团队会比核心团队大一个数量级，报告错误的团队会再大一个数量级
			根据上面Mozilla研究数据，三个数字之间差距确实很大，但是没有达到Apache那种程度，究其原因，可能是Mozilla的混合开发模式导致的，鉴于我们的假设是针对纯开源软件的开发，所以我们没必要认为该假设是错误的。

   - 假设4：拥有强大核心团队的项目如果没有超过核心数量的贡献者，那么他们即使能够开发出新的功能也会因为缺少发现问题和修复问题的机构而失败
			这一点无法从Mozilla现有的数据中得到验证
   - 假设5：如果测试水平相当，开源项目会比只有特性测试的（没有系统测试）一般商业项目缺陷密度要低
   			该假设基本上也得到了验证，Apache和Mozilla的缺陷密度（系统测试前）确实都比一般的商业项目低
   - 假设6：成功的开源软件中，开发者同时也会是软件的使用者
  			提出该假设的原因是开发者是计算机领域的专家，提出的问题自然质量也会更高，虽然我们没有直接的数据表明Mozilla有多少开发者在使用它的浏览器，但是常识告诉我们一个有专业知识的开发者在开发过程中没有使用过他的产品是不可能的。，这条假设也可以认为是支持的。
   - 假设7：开源项目对客户反映的问题处理速度很快
			Mozilla的反应时间要比Apache长很多，但是这是由于它的混合开发属性导致的，其中反应时间可能包含了汇报给owner的时间等，所以该条假设也很难否定。

#总结
我们分别研究了两个成功的卡源软件项目，从中分析出一些共同点而且，我们提出的假设也得到了很好的验证，总结起来开源软件的特点如下：

   - 开源软件一般会有一个不大于10-15人的核心开发团队，该团队控制着整个代码库，且贡献了80%的新功能
   - 如果团队非常庞大，以至于在合理的时间框架内前10-15人不能开发80%的代码，那么就有必要采用严格的代码归属制度将开发团队分组
   - 成功的开源项目中修复缺陷的团队会比核心团队大一个数量级，报告错误的团队会再大一个数量级
   - 如果测试水平相当，开源项目会比只有特性测试的（没有系统测试）一般商业项目缺陷密度要低
   - 成功的开源软件中，开发者同时也会是软件的使用者

